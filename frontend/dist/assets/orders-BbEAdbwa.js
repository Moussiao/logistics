import{N as Ae,O as te,Q as Le,U as ne,R as re,V as j,W as q,Y as G,Z as me,_ as V,$ as ie,a0 as Oe,a1 as Ee,a2 as Se,a3 as Pe,x as N,u as Ce,y as ve,a4 as K,a5 as Me,a6 as xe,a7 as Ie,a8 as De,a9 as he,aa as X,v as C,i as x,ab as I,ac as Re,ad as ke,ae as $e,af as Fe,ag as We,ah as He,s as ge,ai as Ne,aj as Ge,ak as Ue,o as se,b as oe,F as je,k as qe,h as Ve}from"./index-DPe8PrNa.js";var Ke="__lodash_hash_undefined__";function Xe(e){return this.__data__.set(e,Ke),this}function Ye(e){return this.__data__.has(e)}function H(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ae;++t<n;)this.add(e[t])}H.prototype.add=H.prototype.push=Xe;H.prototype.has=Ye;function Je(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Qe(e,t){return e.has(t)}var Ze=1,ze=2;function ye(e,t,n,r,o,i){var d=n&Ze,a=e.length,f=t.length;if(a!=f&&!(d&&f>a))return!1;var u=i.get(e),l=i.get(t);if(u&&l)return u==t&&l==e;var p=-1,m=!0,g=n&ze?new H:void 0;for(i.set(e,t),i.set(t,e);++p<a;){var h=e[p],s=t[p];if(r)var c=d?r(s,h,p,t,e,i):r(h,s,p,e,t,i);if(c!==void 0){if(c)continue;m=!1;break}if(g){if(!Je(t,function(v,w){if(!Qe(g,w)&&(h===v||o(h,v,n,r,i)))return g.push(w)})){m=!1;break}}else if(!(h===s||o(h,s,n,r,i))){m=!1;break}}return i.delete(e),i.delete(t),m}function et(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n}function tt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var nt=1,rt=2,it="[object Boolean]",st="[object Date]",ot="[object Error]",at="[object Map]",lt="[object Number]",ut="[object RegExp]",ct="[object Set]",ft="[object String]",dt="[object Symbol]",pt="[object ArrayBuffer]",mt="[object DataView]",ae=te?te.prototype:void 0,U=ae?ae.valueOf:void 0;function vt(e,t,n,r,o,i,d){switch(n){case mt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pt:return!(e.byteLength!=t.byteLength||!i(new ne(e),new ne(t)));case it:case st:case lt:return Le(+e,+t);case ot:return e.name==t.name&&e.message==t.message;case ut:case ft:return e==t+"";case at:var a=et;case ct:var f=r&nt;if(a||(a=tt),e.size!=t.size&&!f)return!1;var u=d.get(e);if(u)return u==t;r|=rt,d.set(e,t);var l=ye(a(e),a(t),r,o,i,d);return d.delete(e),l;case dt:if(U)return U.call(e)==U.call(t)}return!1}var ht=1,gt=Object.prototype,yt=gt.hasOwnProperty;function wt(e,t,n,r,o,i){var d=n&ht,a=re(e),f=a.length,u=re(t),l=u.length;if(f!=l&&!d)return!1;for(var p=f;p--;){var m=a[p];if(!(d?m in t:yt.call(t,m)))return!1}var g=i.get(e),h=i.get(t);if(g&&h)return g==t&&h==e;var s=!0;i.set(e,t),i.set(t,e);for(var c=d;++p<f;){m=a[p];var v=e[m],w=t[m];if(r)var A=d?r(w,v,m,t,e,i):r(v,w,m,e,t,i);if(!(A===void 0?v===w||o(v,w,n,r,i):A)){s=!1;break}c||(c=m=="constructor")}if(s&&!c){var M=e.constructor,O=t.constructor;M!=O&&"constructor"in e&&"constructor"in t&&!(typeof M=="function"&&M instanceof M&&typeof O=="function"&&O instanceof O)&&(s=!1)}return i.delete(e),i.delete(t),s}var _t=1,le="[object Arguments]",ue="[object Array]",W="[object Object]",bt=Object.prototype,ce=bt.hasOwnProperty;function Bt(e,t,n,r,o,i){var d=V(e),a=V(t),f=d?ue:j(e),u=a?ue:j(t);f=f==le?W:f,u=u==le?W:u;var l=f==W,p=u==W,m=f==u;if(m&&q(e)){if(!q(t))return!1;d=!0,l=!1}if(m&&!l)return i||(i=new G),d||me(e)?ye(e,t,n,r,o,i):vt(e,t,f,n,r,o,i);if(!(n&_t)){var g=l&&ce.call(e,"__wrapped__"),h=p&&ce.call(t,"__wrapped__");if(g||h){var s=g?e.value():e,c=h?t.value():t;return i||(i=new G),o(s,c,n,r,i)}}return m?(i||(i=new G),wt(e,t,n,r,o,i)):!1}function we(e,t,n,r,o){return e===t?!0:e==null||t==null||!ie(e)&&!ie(t)?e!==e&&t!==t:Bt(e,t,n,r,we,o)}var Tt="[object Map]",At="[object Set]",Lt=Object.prototype,Ot=Lt.hasOwnProperty;function Jt(e){if(e==null)return!0;if(Oe(e)&&(V(e)||typeof e=="string"||typeof e.splice=="function"||q(e)||me(e)||Ee(e)))return!e.length;var t=j(e);if(t==Tt||t==At)return!e.size;if(Se(e))return!Pe(e).length;for(var n in e)if(Ot.call(e,n))return!1;return!0}function Et(e,t){return we(e,t)}function _e(e){return xe()?(Ie(e),!0):!1}function _(e){return typeof e=="function"?e():Ce(e)}const be=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const St=e=>e!=null,Pt=Object.prototype.toString,Ct=e=>Pt.call(e)==="[object Object]",b=()=>{},Mt=xt();function xt(){var e,t;return be&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Be(e,t){function n(...r){return new Promise((o,i)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(o).catch(i)})}return n}function It(e,t={}){let n,r,o=b;const i=a=>{clearTimeout(a),o(),o=b};return a=>{const f=_(e),u=_(t.maxWait);return n&&i(n),f<=0||u!==void 0&&u<=0?(r&&(i(r),r=null),Promise.resolve(a())):new Promise((l,p)=>{o=t.rejectOnCancel?p:l,u&&!r&&(r=setTimeout(()=>{n&&i(n),r=null,l(a())},u)),n=setTimeout(()=>{r&&i(r),r=null,l(a())},f)})}}function Dt(...e){let t=0,n,r=!0,o=b,i,d,a,f,u;!De(e[0])&&typeof e[0]=="object"?{delay:d,trailing:a=!0,leading:f=!0,rejectOnCancel:u=!1}=e[0]:[d,a=!0,f=!0,u=!1]=e;const l=()=>{n&&(clearTimeout(n),n=void 0,o(),o=b)};return m=>{const g=_(d),h=Date.now()-t,s=()=>i=m();return l(),g<=0?(t=Date.now(),s()):(h>g&&(f||!r)?(t=Date.now(),s()):a&&(i=new Promise((c,v)=>{o=u?v:c,n=setTimeout(()=>{t=Date.now(),r=!0,c(s()),l()},Math.max(0,g-h))})),!f&&!n&&(n=setTimeout(()=>r=!0,g)),r=!1,i)}}function Te(e){return he()}function Rt(e,t=200,n={}){return Be(It(t,n),e)}function kt(e,t=200,n=!1,r=!0,o=!1){return Be(Dt(t,n,r,o),e)}function $t(e,t=!0,n){Te()?ve(e,n):t?e():K(e)}function Ft(e,t){Te()&&Me(e,t)}function Qt(e,t,n){return N(e,t,{...n,immediate:!0})}const $=be?window:void 0;function L(e){var t;const n=_(e);return(t=n==null?void 0:n.$el)!=null?t:n}function k(...e){let t,n,r,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,o]=e,t=$):[t,n,r,o]=e,!t)return b;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],d=()=>{i.forEach(l=>l()),i.length=0},a=(l,p,m,g)=>(l.addEventListener(p,m,g),()=>l.removeEventListener(p,m,g)),f=N(()=>[L(t),_(o)],([l,p])=>{if(d(),!l)return;const m=Ct(p)?{...p}:p;i.push(...n.flatMap(g=>r.map(h=>a(l,g,h,m))))},{immediate:!0,flush:"post"}),u=()=>{f(),d()};return _e(u),u}let fe=!1;function Zt(e,t,n={}){const{window:r=$,ignore:o=[],capture:i=!0,detectIframe:d=!1}=n;if(!r)return b;Mt&&!fe&&(fe=!0,Array.from(r.document.body.children).forEach(s=>s.addEventListener("click",b)),r.document.documentElement.addEventListener("click",b));let a=!0;const f=s=>_(o).some(c=>{if(typeof c=="string")return Array.from(r.document.querySelectorAll(c)).some(v=>v===s.target||s.composedPath().includes(v));{const v=L(c);return v&&(s.target===v||s.composedPath().includes(v))}});function u(s){const c=_(s);return c&&c.$.subTree.shapeFlag===16}function l(s,c){const v=_(s),w=v.$.subTree&&v.$.subTree.children;return w==null||!Array.isArray(w)?!1:w.some(A=>A.el===c.target||c.composedPath().includes(A.el))}const p=s=>{const c=L(e);if(s.target!=null&&!(!(c instanceof Element)&&u(e)&&l(e,s))&&!(!c||c===s.target||s.composedPath().includes(c))){if(s.detail===0&&(a=!f(s)),!a){a=!0;return}t(s)}};let m=!1;const g=[k(r,"click",s=>{m||(m=!0,setTimeout(()=>{m=!1},0),p(s))},{passive:!0,capture:i}),k(r,"pointerdown",s=>{const c=L(e);a=!f(s)&&!!(c&&!s.composedPath().includes(c))},{passive:!0}),d&&k(r,"blur",s=>{setTimeout(()=>{var c;const v=L(e);((c=r.document.activeElement)==null?void 0:c.tagName)==="IFRAME"&&!(v!=null&&v.contains(r.document.activeElement))&&t(s)},0)})].filter(Boolean);return()=>g.forEach(s=>s())}function Wt(){const e=C(!1),t=he();return t&&ve(()=>{e.value=!0},t),e}function Ht(e){const t=Wt();return x(()=>(t.value,!!e()))}function Nt(e,t,n={}){const{root:r,rootMargin:o="0px",threshold:i=0,window:d=$,immediate:a=!0}=n,f=Ht(()=>d&&"IntersectionObserver"in d),u=x(()=>{const h=_(e);return(Array.isArray(h)?h:[h]).map(L).filter(St)});let l=b;const p=C(a),m=f.value?N(()=>[u.value,L(r),p.value],([h,s])=>{if(l(),!p.value||!h.length)return;const c=new IntersectionObserver(t,{root:L(s),rootMargin:o,threshold:i});h.forEach(v=>v&&c.observe(v)),l=()=>{c.disconnect(),l=b}},{immediate:a,flush:"post"}):b,g=()=>{l(),m(),p.value=!1};return _e(g),{isSupported:f,isActive:p,pause(){l(),p.value=!1},resume(){p.value=!0},stop:g}}function Gt(e,t={}){const{window:n=$,scrollTarget:r,threshold:o=0,rootMargin:i}=t,d=C(!1);return Nt(e,a=>{let f=d.value,u=0;for(const l of a)l.time>=u&&(u=l.time,f=l.isIntersecting);d.value=f},{root:r,window:n,threshold:o,rootMargin:_(i)}),d}function Ut(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const de=1;function jt(e,t={}){const{throttle:n=0,idle:r=200,onStop:o=b,onScroll:i=b,offset:d={left:0,right:0,top:0,bottom:0},eventListenerOptions:a={capture:!1,passive:!0},behavior:f="auto",window:u=$,onError:l=y=>{console.error(y)}}=t,p=C(0),m=C(0),g=x({get(){return p.value},set(y){s(y,void 0)}}),h=x({get(){return m.value},set(y){s(void 0,y)}});function s(y,S){var B,D,R,F;if(!u)return;const T=_(e);if(!T)return;(R=T instanceof Document?u.document.body:T)==null||R.scrollTo({top:(B=_(S))!=null?B:h.value,left:(D=_(y))!=null?D:g.value,behavior:_(f)});const E=((F=T==null?void 0:T.document)==null?void 0:F.documentElement)||(T==null?void 0:T.documentElement)||T;g!=null&&(p.value=E.scrollLeft),h!=null&&(m.value=E.scrollTop)}const c=C(!1),v=X({left:!0,right:!1,top:!0,bottom:!1}),w=X({left:!1,right:!1,top:!1,bottom:!1}),A=y=>{c.value&&(c.value=!1,w.left=!1,w.right=!1,w.top=!1,w.bottom=!1,o(y))},M=Rt(A,n+r),O=y=>{var S;if(!u)return;const B=((S=y==null?void 0:y.document)==null?void 0:S.documentElement)||(y==null?void 0:y.documentElement)||L(y),{display:D,flexDirection:R,direction:F}=getComputedStyle(B),T=F==="rtl"?-1:1,E=B.scrollLeft;w.left=E<p.value,w.right=E>p.value;const Q=E*T<=(d.left||0),Z=E*T+B.clientWidth>=B.scrollWidth-(d.right||0)-de;D==="flex"&&R==="row-reverse"?(v.left=Z,v.right=Q):(v.left=Q,v.right=Z),p.value=E;let P=B.scrollTop;y===u.document&&!P&&(P=u.document.body.scrollTop),w.top=P<m.value,w.bottom=P>m.value;const z=P<=(d.top||0),ee=P+B.clientHeight>=B.scrollHeight-(d.bottom||0)-de;D==="flex"&&R==="column-reverse"?(v.top=ee,v.bottom=z):(v.top=z,v.bottom=ee),m.value=P},J=y=>{var S;if(!u)return;const B=(S=y.target.documentElement)!=null?S:y.target;O(B),c.value=!0,M(y),i(y)};return k(e,"scroll",n?kt(J,n,!0,!1):J,a),$t(()=>{try{const y=_(e);if(!y)return;O(y)}catch(y){l(y)}}),k(e,"scrollend",A,a),{x:g,y:h,isScrolling:c,arrivedState:v,directions:w,measure(){const y=_(e);u&&y&&O(y)}}}function zt(e,t,n={}){var r;const{direction:o="bottom",interval:i=100,canLoadMore:d=()=>!0}=n,a=X(jt(e,{...n,offset:{[o]:(r=n.distance)!=null?r:0,...n.offset}})),f=C(),u=x(()=>!!f.value),l=x(()=>Ut(_(e))),p=Gt(l);function m(){if(a.measure(),!l.value||!p.value||!d(l.value))return;const{scrollHeight:h,clientHeight:s,scrollWidth:c,clientWidth:v}=l.value,w=o==="bottom"||o==="top"?h<=s:c<=v;(a.arrivedState[o]||w)&&(f.value||(f.value=Promise.all([t(a),new Promise(A=>setTimeout(A,i))]).finally(()=>{f.value=null,K(()=>m())})))}const g=N(()=>[a.arrivedState[o],p.value],m,{immediate:!0});return Ft(g),{isLoading:u,reset(){K(()=>m())}}}const pe=async e=>(await I.get("/api/delivery/orders",{params:e})).data,en=async e=>{const t=`/api/delivery/orders/${e}`;return(await I.get(t)).data},tn=async(e,t)=>{const n=`/api/delivery/orders/${e}`;await I.patch(n,t)},nn=async e=>{const t=`/api/delivery/orders/${e}/take-the-job`;await I.post(t)},rn=async e=>{const t=`/api/delivery/orders/${e}/drive-to-customer`;await I.post(t)},sn=async e=>{const t=`/api/delivery/orders/${e}/customer-paid`;await I.post(t)},Y={new:"Новый",processing:"В обработке",delivery:"В пути",paid:"Оплачен",canceled:"Отменен"},on=Object.entries(Y).map(e=>({value:e[0],name:e[1]})),an=e=>{const t=Y[e]||e;return{value:e,name:t}},ln=e=>Y[e.state]||e.state,un=e=>e==="new"?Re:e==="processing"?ke:e==="delivery"?$e:e==="paid"?Fe:e==="canceled"?We:He,qt=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},cn=ge("telegram",{state:()=>{const e=Ne(),[t]=Ge(),[n]=Ue();return{popup:e,backButton:t,mainButton:n}},actions:{openPopup(e){const t=[{type:"destructive",text:"Нет"},{id:"action",type:"default",text:"Да"}];this.popup.open({title:e.title,message:e.message,buttons:t}).then(n=>{n==="action"&&e.onActionButtonClick&&e.onActionButtonClick()})},showBackButton(e){this.offBackButtonClickListener(),this.backButton.on("click",e),this.onClickBackButtonListener=e,this.backButton.show()},hideBackButton(){this.offBackButtonClickListener(),this.backButton.hide()},offBackButtonClickListener(){this.onClickBackButtonListener&&(this.backButton.off("click",this.onClickBackButtonListener),this.onClickBackButtonListener=void 0)},showMainButton(e,t){this.offMainButtonClickListener(),this.mainButton.on("click",t),this.onClickMainButtonListener=t,this.mainButton.isLoaderVisible||this.mainButton.enable(),this.mainButton.setText(e),this.mainButton.show()},hideMainButton(){this.onClickMainButtonListener&&(this.mainButton.off("click",this.onClickMainButtonListener),this.onClickMainButtonListener=void 0),this.mainButton.disable(),this.mainButton.hide()},offMainButtonClickListener(){this.onClickMainButtonListener&&(this.mainButton.off("click",this.onClickMainButtonListener),this.onClickMainButtonListener=void 0)},showMainButtonLoader(){this.mainButton.showLoader(),this.mainButton.disable()},hideMainButtonLoader(){this.mainButton.hideLoader(),this.mainButton.enable()}}}),Vt={},Kt={class:"flex flex-col gap-2"};function Xt(e,t){return se(),oe("div",Kt,[(se(),oe(je,null,qe(5,n=>Ve("div",{key:n,class:"VOrdersListLoader__Item rounded h-28 animate-pulse"})),64))])}const fn=qt(Vt,[["render",Xt]]),dn=ge("orders",{state:()=>({items:[],nextCursor:null,currentFilters:void 0}),actions:{async getData(e){if(!(Et(e,this.currentFilters)&&this.items.length!==0))try{const t=await pe(e);this.items=t.items,this.nextCursor=t.nextCursor,this.currentFilters=e}catch{this.clean()}},async loadMore(){try{const e={...this.currentFilters};e.cursor=this.nextCursor;const t=await pe(e);this.items.push(...t.items),this.nextCursor=t.nextCursor}catch{this.nextCursor=null}},clean(){this.items=[],this.nextCursor=null}}});export{on as O,fn as V,qt as _,un as a,en as b,dn as c,rn as d,tn as e,sn as f,ln as g,an as h,Jt as i,Et as j,zt as k,Zt as o,nn as t,cn as u,Qt as w};
